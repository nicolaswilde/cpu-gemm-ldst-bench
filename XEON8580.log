cc -Ofast -march=native -fno-strict-aliasing -fopenmp -DCACHELINE=64 -DTM=1024 -DTN=512 -DTK=512 -DSINGLE_CORE=1 -DMULTI_CORE=0 -DCORES_M=4 -DCORES_N=4 -DCORE_START=0 -DCORE_STRIDE=1 -DLOAD_C=1 -DLOAD_AB=1 -DSTORE_C=1 -DAPAD=64 -DBPAD=64 -DCPAD=16 amx-gemm.c -o amx-gemm 
objdump -d amx-gemm > amx-gemm.s
make lockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo userspace | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
	echo 2300000  | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_setspeed > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
./amx-gemm
Test 1 CPU Core (Core 0), TM TN TK = 1024 512 512, LOAD_C = 1, LOAD_AB = 1, STORE_C = 1, A/B/C PAD = 64 64 16
Test passed: M N K =   258  1903   704
Test passed: M N K =  1436  1318  2048
Test passed: M N K =  1340  1536  1024
Test passed: M N K =  1780  1973  1472
Test passed: M N K =   908  1770   128
M N K =   256   256   256, Elapsed time =   0.000141 s, Result = 16106800, Performance =   2.39 TOPS
M N K =   256   256   512, Elapsed time =   0.000145 s, Result = 1b10c000, Performance =   4.63 TOPS
M N K =   256   256  1024, Elapsed time =   0.000207 s, Result = 25117000, Performance =   6.49 TOPS
M N K =   256   256  2048, Elapsed time =   0.000265 s, Result = 3912d000, Performance =  10.14 TOPS
M N K =   256   256  4096, Elapsed time =   0.000830 s, Result = 61159000, Performance =   6.47 TOPS
M N K =   256   256  8192, Elapsed time =   0.001857 s, Result = b11b1000, Performance =   5.78 TOPS
M N K =   256   256 16384, Elapsed time =   0.003583 s, Result = 51261000, Performance =   5.99 TOPS
M N K =   512   512   256, Elapsed time =   0.000519 s, Result = 7840f000, Performance =   2.58 TOPS
M N K =   512   512   512, Elapsed time =   0.000603 s, Result = a041a000, Performance =   4.45 TOPS
M N K =   512   512  1024, Elapsed time =   0.000716 s, Result = f0430000, Performance =   7.50 TOPS
M N K =   512   512  2048, Elapsed time =   0.001740 s, Result = 9045c000, Performance =   6.17 TOPS
M N K =   512   512  4096, Elapsed time =   0.002714 s, Result = d04b4000, Performance =   7.91 TOPS
M N K =   512   512  8192, Elapsed time =   0.004379 s, Result = 50564000, Performance =   9.81 TOPS
M N K =   512   512 16384, Elapsed time =   0.008159 s, Result = 506c4000, Performance =  10.53 TOPS
M N K =  1024  1024   256, Elapsed time =   0.004944 s, Result = 71031000, Performance =   1.09 TOPS
M N K =  1024  1024   512, Elapsed time =   0.005360 s, Result = 61052000, Performance =   2.00 TOPS
M N K =  1024  1024  1024, Elapsed time =   0.006203 s, Result = 41094000, Performance =   3.46 TOPS
M N K =  1024  1024  2048, Elapsed time =   0.008285 s, Result = 01118000, Performance =   5.18 TOPS
M N K =  1024  1024  4096, Elapsed time =   0.010922 s, Result = 81220000, Performance =   7.86 TOPS
M N K =  1024  1024  8192, Elapsed time =   0.016431 s, Result = 81430000, Performance =  10.46 TOPS
M N K =  1024  1024 16384, Elapsed time =   0.030062 s, Result = 81850000, Performance =  11.43 TOPS
M N K =  2048  2048   256, Elapsed time =   0.021390 s, Result = c40c4000, Performance =   1.00 TOPS
M N K =  2048  2048   512, Elapsed time =   0.022983 s, Result = 84148000, Performance =   1.87 TOPS
M N K =  2048  2048  1024, Elapsed time =   0.026425 s, Result = 04250000, Performance =   3.25 TOPS
M N K =  2048  2048  2048, Elapsed time =   0.034482 s, Result = 04460000, Performance =   4.98 TOPS
M N K =  2048  2048  4096, Elapsed time =   0.045531 s, Result = 04880000, Performance =   7.55 TOPS
M N K =  2048  2048  8192, Elapsed time =   0.066407 s, Result = 050c0000, Performance =  10.35 TOPS
M N K =  2048  2048 16384, Elapsed time =   0.118068 s, Result = 06140000, Performance =  11.64 TOPS
M N K =  4096  4096   256, Elapsed time =   0.085601 s, Result = 10310000, Performance =   1.00 TOPS
M N K =  4096  4096   512, Elapsed time =   0.092341 s, Result = 10520000, Performance =   1.86 TOPS
M N K =  4096  4096  1024, Elapsed time =   0.105441 s, Result = 10940000, Performance =   3.26 TOPS
M N K =  4096  4096  2048, Elapsed time =   0.135897 s, Result = 11180000, Performance =   5.06 TOPS
M N K =  4096  4096  4096, Elapsed time =   0.180726 s, Result = 12200000, Performance =   7.60 TOPS
M N K =  4096  4096  8192, Elapsed time =   0.278550 s, Result = 14300000, Performance =   9.87 TOPS
M N K =  4096  4096 16384, Elapsed time =   0.553040 s, Result = 18500000, Performance =   9.94 TOPS
M N K =  8192  8192   256, Elapsed time =   0.440672 s, Result = 40c40000, Performance =   0.78 TOPS
M N K =  8192  8192   512, Elapsed time =   0.477273 s, Result = 41480000, Performance =   1.44 TOPS
M N K =  8192  8192  1024, Elapsed time =   0.546269 s, Result = 42500000, Performance =   2.52 TOPS
M N K =  8192  8192  2048, Elapsed time =   0.687091 s, Result = 44600000, Performance =   4.00 TOPS
M N K =  8192  8192  4096, Elapsed time =   0.900483 s, Result = 48800000, Performance =   6.11 TOPS
M N K =  8192  8192  8192, Elapsed time =   1.326013 s, Result = 50c00000, Performance =   8.29 TOPS
M N K =  8192  8192 16384, Elapsed time =   2.439305 s, Result = 61400000, Performance =   9.01 TOPS
M N K = 16384 16384   256, Elapsed time =   1.798744 s, Result = 03100000, Performance =   0.76 TOPS
M N K = 16384 16384   512, Elapsed time =   1.963675 s, Result = 05200000, Performance =   1.40 TOPS
M N K = 16384 16384  1024, Elapsed time =   2.306172 s, Result = 09400000, Performance =   2.38 TOPS
M N K = 16384 16384  2048, Elapsed time =   2.865181 s, Result = 11800000, Performance =   3.84 TOPS
M N K = 16384 16384  4096, Elapsed time =   3.649208 s, Result = 22000000, Performance =   6.03 TOPS
M N K = 16384 16384  8192, Elapsed time =   5.659461 s, Result = 43000000, Performance =   7.77 TOPS
M N K = 16384 16384 16384, Elapsed time =  10.037103 s, Result = 85000000, Performance =   8.76 TOPS
make unlockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo ondemand | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
cc -Ofast -march=native -fno-strict-aliasing -fopenmp -DCACHELINE=64 -DTM=512 -DTN=1024 -DTK=512 -DSINGLE_CORE=1 -DMULTI_CORE=0 -DCORES_M=4 -DCORES_N=4 -DCORE_START=0 -DCORE_STRIDE=1 -DLOAD_C=1 -DLOAD_AB=1 -DSTORE_C=1 -DAPAD=64 -DBPAD=64 -DCPAD=16 amx-gemm.c -o amx-gemm 
objdump -d amx-gemm > amx-gemm.s
make lockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo userspace | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
	echo 2300000  | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_setspeed > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
./amx-gemm
Test 1 CPU Core (Core 0), TM TN TK = 512 1024 512, LOAD_C = 1, LOAD_AB = 1, STORE_C = 1, A/B/C PAD = 64 64 16
Test passed: M N K =  2043   220  1920
Test passed: M N K =  1273  1837  1472
Test passed: M N K =   837  1390  1536
Test passed: M N K =   611    66   512
Test passed: M N K =   893   976  1408
M N K =   256   256   256, Elapsed time =   0.000148 s, Result = 16106800, Performance =   2.27 TOPS
M N K =   256   256   512, Elapsed time =   0.000185 s, Result = 1b10c000, Performance =   3.63 TOPS
M N K =   256   256  1024, Elapsed time =   0.000400 s, Result = 25117000, Performance =   3.36 TOPS
M N K =   256   256  2048, Elapsed time =   0.000289 s, Result = 3912d000, Performance =   9.29 TOPS
M N K =   256   256  4096, Elapsed time =   0.000762 s, Result = 61159000, Performance =   7.04 TOPS
M N K =   256   256  8192, Elapsed time =   0.001885 s, Result = b11b1000, Performance =   5.70 TOPS
M N K =   256   256 16384, Elapsed time =   0.003612 s, Result = 51261000, Performance =   5.95 TOPS
M N K =   512   512   256, Elapsed time =   0.000508 s, Result = 7840f000, Performance =   2.64 TOPS
M N K =   512   512   512, Elapsed time =   0.000579 s, Result = a041a000, Performance =   4.64 TOPS
M N K =   512   512  1024, Elapsed time =   0.000712 s, Result = f0430000, Performance =   7.54 TOPS
M N K =   512   512  2048, Elapsed time =   0.001623 s, Result = 9045c000, Performance =   6.61 TOPS
M N K =   512   512  4096, Elapsed time =   0.002719 s, Result = d04b4000, Performance =   7.90 TOPS
M N K =   512   512  8192, Elapsed time =   0.004356 s, Result = 50564000, Performance =   9.86 TOPS
M N K =   512   512 16384, Elapsed time =   0.008120 s, Result = 506c4000, Performance =  10.58 TOPS
M N K =  1024  1024   256, Elapsed time =   0.003818 s, Result = 71031000, Performance =   1.41 TOPS
M N K =  1024  1024   512, Elapsed time =   0.004316 s, Result = 61052000, Performance =   2.49 TOPS
M N K =  1024  1024  1024, Elapsed time =   0.005255 s, Result = 41094000, Performance =   4.09 TOPS
M N K =  1024  1024  2048, Elapsed time =   0.007101 s, Result = 01118000, Performance =   6.05 TOPS
M N K =  1024  1024  4096, Elapsed time =   0.009622 s, Result = 81220000, Performance =   8.93 TOPS
M N K =  1024  1024  8192, Elapsed time =   0.015470 s, Result = 81430000, Performance =  11.11 TOPS
M N K =  1024  1024 16384, Elapsed time =   0.027824 s, Result = 81850000, Performance =  12.35 TOPS
M N K =  2048  2048   256, Elapsed time =   0.018238 s, Result = c40c4000, Performance =   1.18 TOPS
M N K =  2048  2048   512, Elapsed time =   0.019940 s, Result = 84148000, Performance =   2.15 TOPS
M N K =  2048  2048  1024, Elapsed time =   0.023443 s, Result = 04250000, Performance =   3.66 TOPS
M N K =  2048  2048  2048, Elapsed time =   0.030918 s, Result = 04460000, Performance =   5.56 TOPS
M N K =  2048  2048  4096, Elapsed time =   0.040493 s, Result = 04880000, Performance =   8.49 TOPS
M N K =  2048  2048  8192, Elapsed time =   0.063052 s, Result = 050c0000, Performance =  10.90 TOPS
M N K =  2048  2048 16384, Elapsed time =   0.114452 s, Result = 06140000, Performance =  12.01 TOPS
M N K =  4096  4096   256, Elapsed time =   0.073331 s, Result = 10310000, Performance =   1.17 TOPS
M N K =  4096  4096   512, Elapsed time =   0.080148 s, Result = 10520000, Performance =   2.14 TOPS
M N K =  4096  4096  1024, Elapsed time =   0.094361 s, Result = 10940000, Performance =   3.64 TOPS
M N K =  4096  4096  2048, Elapsed time =   0.126224 s, Result = 11180000, Performance =   5.44 TOPS
M N K =  4096  4096  4096, Elapsed time =   0.167519 s, Result = 12200000, Performance =   8.20 TOPS
M N K =  4096  4096  8192, Elapsed time =   0.266408 s, Result = 14300000, Performance =  10.32 TOPS
M N K =  4096  4096 16384, Elapsed time =   0.528678 s, Result = 18500000, Performance =  10.40 TOPS
M N K =  8192  8192   256, Elapsed time =   0.394037 s, Result = 40c40000, Performance =   0.87 TOPS
M N K =  8192  8192   512, Elapsed time =   0.432300 s, Result = 41480000, Performance =   1.59 TOPS
M N K =  8192  8192  1024, Elapsed time =   0.501100 s, Result = 42500000, Performance =   2.74 TOPS
M N K =  8192  8192  2048, Elapsed time =   0.649659 s, Result = 44600000, Performance =   4.23 TOPS
M N K =  8192  8192  4096, Elapsed time =   0.854135 s, Result = 48800000, Performance =   6.44 TOPS
M N K =  8192  8192  8192, Elapsed time =   1.284442 s, Result = 50c00000, Performance =   8.56 TOPS
M N K =  8192  8192 16384, Elapsed time =   2.424788 s, Result = 61400000, Performance =   9.07 TOPS
M N K = 16384 16384   256, Elapsed time =   1.698431 s, Result = 03100000, Performance =   0.81 TOPS
M N K = 16384 16384   512, Elapsed time =   1.835523 s, Result = 05200000, Performance =   1.50 TOPS
M N K = 16384 16384  1024, Elapsed time =   2.201278 s, Result = 09400000, Performance =   2.50 TOPS
M N K = 16384 16384  2048, Elapsed time =   2.762646 s, Result = 11800000, Performance =   3.98 TOPS
M N K = 16384 16384  4096, Elapsed time =   3.470141 s, Result = 22000000, Performance =   6.34 TOPS
M N K = 16384 16384  8192, Elapsed time =   5.588076 s, Result = 43000000, Performance =   7.87 TOPS
M N K = 16384 16384 16384, Elapsed time =  11.116762 s, Result = 85000000, Performance =   7.91 TOPS
make unlockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo ondemand | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
cc -Ofast -march=native -fno-strict-aliasing -fopenmp -DCACHELINE=64 -DTM=1024 -DTN=512 -DTK=512 -DSINGLE_CORE=0 -DMULTI_CORE=1 -DCORES_M=4 -DCORES_N=4 -DCORE_START=0 -DCORE_STRIDE=1 -DLOAD_C=1 -DLOAD_AB=1 -DSTORE_C=1 -DAPAD=64 -DBPAD=64 -DCPAD=16 amx-gemm.c -o amx-gemm 
objdump -d amx-gemm > amx-gemm.s
make lockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo userspace | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
	echo 2300000  | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_setspeed > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
./amx-gemm
Test 16 CPU Cores (4 Cores x 4 Cores)(Core 0 - Core 15 per 1 Cores), TM TN TK = 1024 512 512, LOAD_C = 1, LOAD_AB = 1, STORE_C = 1, A/B/C PAD = 64 64 16
Test passed: M N K =  2007  1328   256
Test passed: M N K =    90  1003  1856
Test passed: M N K =   741  1695  1664
Test passed: M N K =   815  1514  1024
Test passed: M N K =   542  1014   256
M N K =   256   256   256, Elapsed time =   0.000258 s, Result = 16106800, Performance =   1.30 TOPS
M N K =   256   256   512, Elapsed time =   0.000248 s, Result = 1b10c000, Performance =   2.71 TOPS
M N K =   256   256  1024, Elapsed time =   0.000295 s, Result = 25117000, Performance =   4.54 TOPS
M N K =   256   256  2048, Elapsed time =   0.000535 s, Result = 3912d000, Performance =   5.02 TOPS
M N K =   256   256  4096, Elapsed time =   0.000913 s, Result = 61159000, Performance =   5.88 TOPS
M N K =   256   256  8192, Elapsed time =   0.001964 s, Result = b11b1000, Performance =   5.47 TOPS
M N K =   256   256 16384, Elapsed time =   0.003840 s, Result = 51261000, Performance =   5.59 TOPS
M N K =   512   512   256, Elapsed time =   0.000584 s, Result = 7840f000, Performance =   2.30 TOPS
M N K =   512   512   512, Elapsed time =   0.000655 s, Result = a041a000, Performance =   4.10 TOPS
M N K =   512   512  1024, Elapsed time =   0.000940 s, Result = f0430000, Performance =   5.71 TOPS
M N K =   512   512  2048, Elapsed time =   0.001731 s, Result = 9045c000, Performance =   6.20 TOPS
M N K =   512   512  4096, Elapsed time =   0.002635 s, Result = d04b4000, Performance =   8.15 TOPS
M N K =   512   512  8192, Elapsed time =   0.004429 s, Result = 50564000, Performance =   9.70 TOPS
M N K =   512   512 16384, Elapsed time =   0.008319 s, Result = 506c4000, Performance =  10.33 TOPS
M N K =  1024  1024   256, Elapsed time =   0.002143 s, Result = 71031000, Performance =   2.51 TOPS
M N K =  1024  1024   512, Elapsed time =   0.003227 s, Result = 61052000, Performance =   3.33 TOPS
M N K =  1024  1024  1024, Elapsed time =   0.003289 s, Result = 41094000, Performance =   6.53 TOPS
M N K =  1024  1024  2048, Elapsed time =   0.003900 s, Result = 01118000, Performance =  11.01 TOPS
M N K =  1024  1024  4096, Elapsed time =   0.005726 s, Result = 81220000, Performance =  15.00 TOPS
M N K =  1024  1024  8192, Elapsed time =   0.008639 s, Result = 81430000, Performance =  19.89 TOPS
M N K =  1024  1024 16384, Elapsed time =   0.015405 s, Result = 81850000, Performance =  22.30 TOPS
M N K =  2048  2048   256, Elapsed time =   0.003197 s, Result = c40c4000, Performance =   6.72 TOPS
M N K =  2048  2048   512, Elapsed time =   0.003428 s, Result = 84148000, Performance =  12.53 TOPS
M N K =  2048  2048  1024, Elapsed time =   0.003773 s, Result = 04250000, Performance =  22.77 TOPS
M N K =  2048  2048  2048, Elapsed time =   0.004667 s, Result = 04460000, Performance =  36.81 TOPS
M N K =  2048  2048  4096, Elapsed time =   0.006202 s, Result = 04880000, Performance =  55.40 TOPS
M N K =  2048  2048  8192, Elapsed time =   0.009184 s, Result = 050c0000, Performance =  74.82 TOPS
M N K =  2048  2048 16384, Elapsed time =   0.015597 s, Result = 06140000, Performance =  88.12 TOPS
M N K =  4096  4096   256, Elapsed time =   0.006528 s, Result = 10310000, Performance =  13.16 TOPS
M N K =  4096  4096   512, Elapsed time =   0.006868 s, Result = 10520000, Performance =  25.02 TOPS
M N K =  4096  4096  1024, Elapsed time =   0.007502 s, Result = 10940000, Performance =  45.80 TOPS
M N K =  4096  4096  2048, Elapsed time =   0.009296 s, Result = 11180000, Performance =  73.92 TOPS
M N K =  4096  4096  4096, Elapsed time =   0.012007 s, Result = 12200000, Performance = 114.47 TOPS
M N K =  4096  4096  8192, Elapsed time =   0.018148 s, Result = 14300000, Performance = 151.47 TOPS
M N K =  4096  4096 16384, Elapsed time =   0.040993 s, Result = 18500000, Performance = 134.11 TOPS
M N K =  8192  8192   256, Elapsed time =   0.044024 s, Result = 40c40000, Performance =   7.80 TOPS
M N K =  8192  8192   512, Elapsed time =   0.045950 s, Result = 41480000, Performance =  14.96 TOPS
M N K =  8192  8192  1024, Elapsed time =   0.048876 s, Result = 42500000, Performance =  28.12 TOPS
M N K =  8192  8192  2048, Elapsed time =   0.056925 s, Result = 44600000, Performance =  48.29 TOPS
M N K =  8192  8192  4096, Elapsed time =   0.082042 s, Result = 48800000, Performance =  67.01 TOPS
M N K =  8192  8192  8192, Elapsed time =   0.114673 s, Result = 50c00000, Performance =  95.88 TOPS
M N K =  8192  8192 16384, Elapsed time =   0.221187 s, Result = 61400000, Performance =  99.42 TOPS
M N K = 16384 16384   256, Elapsed time =   0.234674 s, Result = 03100000, Performance =   5.86 TOPS
M N K = 16384 16384   512, Elapsed time =   0.247094 s, Result = 05200000, Performance =  11.12 TOPS
M N K = 16384 16384  1024, Elapsed time =   0.275216 s, Result = 09400000, Performance =  19.98 TOPS
M N K = 16384 16384  2048, Elapsed time =   0.302144 s, Result = 11800000, Performance =  36.39 TOPS
M N K = 16384 16384  4096, Elapsed time =   0.346749 s, Result = 22000000, Performance =  63.42 TOPS
M N K = 16384 16384  8192, Elapsed time =   0.502741 s, Result = 43000000, Performance =  87.48 TOPS
M N K = 16384 16384 16384, Elapsed time =   0.847082 s, Result = 85000000, Performance = 103.84 TOPS
make unlockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo ondemand | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
cc -Ofast -march=native -fno-strict-aliasing -fopenmp -DCACHELINE=64 -DTM=512 -DTN=1024 -DTK=512 -DSINGLE_CORE=0 -DMULTI_CORE=1 -DCORES_M=4 -DCORES_N=4 -DCORE_START=0 -DCORE_STRIDE=1 -DLOAD_C=1 -DLOAD_AB=1 -DSTORE_C=1 -DAPAD=64 -DBPAD=64 -DCPAD=16 amx-gemm.c -o amx-gemm 
objdump -d amx-gemm > amx-gemm.s
make lockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo userspace | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
	echo 2300000  | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_setspeed > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
./amx-gemm
Test 16 CPU Cores (4 Cores x 4 Cores)(Core 0 - Core 15 per 1 Cores), TM TN TK = 512 1024 512, LOAD_C = 1, LOAD_AB = 1, STORE_C = 1, A/B/C PAD = 64 64 16
Test passed: M N K =   452  1588  1536
Test passed: M N K =  1339  1267  1728
Test passed: M N K =   764   264  1216
Test passed: M N K =   907   768  1664
Test passed: M N K =   261  1459   192
M N K =   256   256   256, Elapsed time =   0.000236 s, Result = 16106800, Performance =   1.42 TOPS
M N K =   256   256   512, Elapsed time =   0.000283 s, Result = 1b10c000, Performance =   2.37 TOPS
M N K =   256   256  1024, Elapsed time =   0.000362 s, Result = 25117000, Performance =   3.71 TOPS
M N K =   256   256  2048, Elapsed time =   0.000529 s, Result = 3912d000, Performance =   5.07 TOPS
M N K =   256   256  4096, Elapsed time =   0.000973 s, Result = 61159000, Performance =   5.52 TOPS
M N K =   256   256  8192, Elapsed time =   0.002022 s, Result = b11b1000, Performance =   5.31 TOPS
M N K =   256   256 16384, Elapsed time =   0.003786 s, Result = 51261000, Performance =   5.67 TOPS
M N K =   512   512   256, Elapsed time =   0.000562 s, Result = 7840f000, Performance =   2.39 TOPS
M N K =   512   512   512, Elapsed time =   0.000670 s, Result = a041a000, Performance =   4.01 TOPS
M N K =   512   512  1024, Elapsed time =   0.000908 s, Result = f0430000, Performance =   5.91 TOPS
M N K =   512   512  2048, Elapsed time =   0.001713 s, Result = 9045c000, Performance =   6.27 TOPS
M N K =   512   512  4096, Elapsed time =   0.002624 s, Result = d04b4000, Performance =   8.18 TOPS
M N K =   512   512  8192, Elapsed time =   0.004436 s, Result = 50564000, Performance =   9.68 TOPS
M N K =   512   512 16384, Elapsed time =   0.008463 s, Result = 506c4000, Performance =  10.15 TOPS
M N K =  1024  1024   256, Elapsed time =   0.001665 s, Result = 71031000, Performance =   3.22 TOPS
M N K =  1024  1024   512, Elapsed time =   0.002145 s, Result = 61052000, Performance =   5.01 TOPS
M N K =  1024  1024  1024, Elapsed time =   0.002437 s, Result = 41094000, Performance =   8.81 TOPS
M N K =  1024  1024  2048, Elapsed time =   0.003192 s, Result = 01118000, Performance =  13.46 TOPS
M N K =  1024  1024  4096, Elapsed time =   0.004477 s, Result = 81220000, Performance =  19.19 TOPS
M N K =  1024  1024  8192, Elapsed time =   0.007428 s, Result = 81430000, Performance =  23.13 TOPS
M N K =  1024  1024 16384, Elapsed time =   0.012891 s, Result = 81850000, Performance =  26.65 TOPS
M N K =  2048  2048   256, Elapsed time =   0.002495 s, Result = c40c4000, Performance =   8.61 TOPS
M N K =  2048  2048   512, Elapsed time =   0.002716 s, Result = 84148000, Performance =  15.81 TOPS
M N K =  2048  2048  1024, Elapsed time =   0.003288 s, Result = 04250000, Performance =  26.13 TOPS
M N K =  2048  2048  2048, Elapsed time =   0.003971 s, Result = 04460000, Performance =  43.27 TOPS
M N K =  2048  2048  4096, Elapsed time =   0.005319 s, Result = 04880000, Performance =  64.60 TOPS
M N K =  2048  2048  8192, Elapsed time =   0.008209 s, Result = 050c0000, Performance =  83.72 TOPS
M N K =  2048  2048 16384, Elapsed time =   0.014524 s, Result = 06140000, Performance =  94.63 TOPS
M N K =  4096  4096   256, Elapsed time =   0.005561 s, Result = 10310000, Performance =  15.45 TOPS
M N K =  4096  4096   512, Elapsed time =   0.005986 s, Result = 10520000, Performance =  28.70 TOPS
M N K =  4096  4096  1024, Elapsed time =   0.006736 s, Result = 10940000, Performance =  51.01 TOPS
M N K =  4096  4096  2048, Elapsed time =   0.008243 s, Result = 11180000, Performance =  83.36 TOPS
M N K =  4096  4096  4096, Elapsed time =   0.011115 s, Result = 12200000, Performance = 123.65 TOPS
M N K =  4096  4096  8192, Elapsed time =   0.017134 s, Result = 14300000, Performance = 160.42 TOPS
M N K =  4096  4096 16384, Elapsed time =   0.038505 s, Result = 18500000, Performance = 142.78 TOPS
M N K =  8192  8192   256, Elapsed time =   0.043218 s, Result = 40c40000, Performance =   7.95 TOPS
M N K =  8192  8192   512, Elapsed time =   0.046024 s, Result = 41480000, Performance =  14.93 TOPS
M N K =  8192  8192  1024, Elapsed time =   0.048596 s, Result = 42500000, Performance =  28.28 TOPS
M N K =  8192  8192  2048, Elapsed time =   0.054590 s, Result = 44600000, Performance =  50.35 TOPS
M N K =  8192  8192  4096, Elapsed time =   0.068183 s, Result = 48800000, Performance =  80.63 TOPS
M N K =  8192  8192  8192, Elapsed time =   0.103633 s, Result = 50c00000, Performance = 106.10 TOPS
M N K =  8192  8192 16384, Elapsed time =   0.253372 s, Result = 61400000, Performance =  86.79 TOPS
M N K = 16384 16384   256, Elapsed time =   0.222847 s, Result = 03100000, Performance =   6.17 TOPS
M N K = 16384 16384   512, Elapsed time =   0.238396 s, Result = 05200000, Performance =  11.53 TOPS
M N K = 16384 16384  1024, Elapsed time =   0.259069 s, Result = 09400000, Performance =  21.22 TOPS
M N K = 16384 16384  2048, Elapsed time =   0.279973 s, Result = 11800000, Performance =  39.27 TOPS
M N K = 16384 16384  4096, Elapsed time =   0.317076 s, Result = 22000000, Performance =  69.35 TOPS
M N K = 16384 16384  8192, Elapsed time =   0.556036 s, Result = 43000000, Performance =  79.10 TOPS
M N K = 16384 16384 16384, Elapsed time =   1.093260 s, Result = 85000000, Performance =  80.46 TOPS
make unlockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo ondemand | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
cc -Ofast -march=native -fno-strict-aliasing -fopenmp -DCACHELINE=64 -DTM=1024 -DTN=512 -DTK=512 -DSINGLE_CORE=0 -DMULTI_CORE=1 -DCORES_M=4 -DCORES_N=4 -DCORE_START=0 -DCORE_STRIDE=1 -DLOAD_C=1 -DLOAD_AB=1 -DSTORE_C=1 -DAPAD=64 -DBPAD=64 -DCPAD=16 amx-gemm.c -o amx-gemm 
objdump -d amx-gemm > amx-gemm.s
make lockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo userspace | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
	echo 2300000  | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_setspeed > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
./amx-gemm
Test 16 CPU Cores (4 Cores x 4 Cores)(Core 0 - Core 15 per 1 Cores), TM TN TK = 1024 512 512, LOAD_C = 1, LOAD_AB = 1, STORE_C = 1, A/B/C PAD = 64 64 16
Test passed: M N K =   472   488   704
Test passed: M N K =   672   937  1536
Test passed: M N K =  1661  1840  1728
Test passed: M N K =  1596   569   960
Test passed: M N K =   338  1682  1536
M N K =   256   256   256, Elapsed time =   0.000238 s, Result = 16106800, Performance =   1.41 TOPS
M N K =   256   256   512, Elapsed time =   0.000256 s, Result = 1b10c000, Performance =   2.62 TOPS
M N K =   256   256  1024, Elapsed time =   0.000329 s, Result = 25117000, Performance =   4.07 TOPS
M N K =   256   256  2048, Elapsed time =   0.000505 s, Result = 3912d000, Performance =   5.32 TOPS
M N K =   256   256  4096, Elapsed time =   0.000991 s, Result = 61159000, Performance =   5.42 TOPS
M N K =   256   256  8192, Elapsed time =   0.002006 s, Result = b11b1000, Performance =   5.35 TOPS
M N K =   256   256 16384, Elapsed time =   0.003747 s, Result = 51261000, Performance =   5.73 TOPS
M N K =   512   512   256, Elapsed time =   0.000555 s, Result = 7840f000, Performance =   2.42 TOPS
M N K =   512   512   512, Elapsed time =   0.000608 s, Result = a041a000, Performance =   4.41 TOPS
M N K =   512   512  1024, Elapsed time =   0.000815 s, Result = f0430000, Performance =   6.59 TOPS
M N K =   512   512  2048, Elapsed time =   0.001720 s, Result = 9045c000, Performance =   6.24 TOPS
M N K =   512   512  4096, Elapsed time =   0.002623 s, Result = d04b4000, Performance =   8.19 TOPS
M N K =   512   512  8192, Elapsed time =   0.004306 s, Result = 50564000, Performance =   9.97 TOPS
M N K =   512   512 16384, Elapsed time =   0.008003 s, Result = 506c4000, Performance =  10.73 TOPS
M N K =  1024  1024   256, Elapsed time =   0.002670 s, Result = 71031000, Performance =   2.01 TOPS
M N K =  1024  1024   512, Elapsed time =   0.002520 s, Result = 61052000, Performance =   4.26 TOPS
M N K =  1024  1024  1024, Elapsed time =   0.003464 s, Result = 41094000, Performance =   6.20 TOPS
M N K =  1024  1024  2048, Elapsed time =   0.004185 s, Result = 01118000, Performance =  10.26 TOPS
M N K =  1024  1024  4096, Elapsed time =   0.006046 s, Result = 81220000, Performance =  14.21 TOPS
M N K =  1024  1024  8192, Elapsed time =   0.009435 s, Result = 81430000, Performance =  18.21 TOPS
M N K =  1024  1024 16384, Elapsed time =   0.016191 s, Result = 81850000, Performance =  21.22 TOPS
M N K =  2048  2048   256, Elapsed time =   0.003148 s, Result = c40c4000, Performance =   6.82 TOPS
M N K =  2048  2048   512, Elapsed time =   0.003505 s, Result = 84148000, Performance =  12.25 TOPS
M N K =  2048  2048  1024, Elapsed time =   0.003685 s, Result = 04250000, Performance =  23.31 TOPS
M N K =  2048  2048  2048, Elapsed time =   0.004683 s, Result = 04460000, Performance =  36.69 TOPS
M N K =  2048  2048  4096, Elapsed time =   0.005989 s, Result = 04880000, Performance =  57.37 TOPS
M N K =  2048  2048  8192, Elapsed time =   0.008983 s, Result = 050c0000, Performance =  76.50 TOPS
M N K =  2048  2048 16384, Elapsed time =   0.015780 s, Result = 06140000, Performance =  87.10 TOPS
M N K =  4096  4096   256, Elapsed time =   0.006577 s, Result = 10310000, Performance =  13.06 TOPS
M N K =  4096  4096   512, Elapsed time =   0.006847 s, Result = 10520000, Performance =  25.09 TOPS
M N K =  4096  4096  1024, Elapsed time =   0.007528 s, Result = 10940000, Performance =  45.64 TOPS
M N K =  4096  4096  2048, Elapsed time =   0.009062 s, Result = 11180000, Performance =  75.83 TOPS
M N K =  4096  4096  4096, Elapsed time =   0.011761 s, Result = 12200000, Performance = 116.86 TOPS
M N K =  4096  4096  8192, Elapsed time =   0.017347 s, Result = 14300000, Performance = 158.46 TOPS
M N K =  4096  4096 16384, Elapsed time =   0.038627 s, Result = 18500000, Performance = 142.32 TOPS
M N K =  8192  8192   256, Elapsed time =   0.045101 s, Result = 40c40000, Performance =   7.62 TOPS
M N K =  8192  8192   512, Elapsed time =   0.047122 s, Result = 41480000, Performance =  14.58 TOPS
M N K =  8192  8192  1024, Elapsed time =   0.049550 s, Result = 42500000, Performance =  27.74 TOPS
M N K =  8192  8192  2048, Elapsed time =   0.057535 s, Result = 44600000, Performance =  47.78 TOPS
M N K =  8192  8192  4096, Elapsed time =   0.073628 s, Result = 48800000, Performance =  74.67 TOPS
M N K =  8192  8192  8192, Elapsed time =   0.112533 s, Result = 50c00000, Performance =  97.71 TOPS
M N K =  8192  8192 16384, Elapsed time =   0.222816 s, Result = 61400000, Performance =  98.69 TOPS
M N K = 16384 16384   256, Elapsed time =   0.231572 s, Result = 03100000, Performance =   5.94 TOPS
M N K = 16384 16384   512, Elapsed time =   0.246759 s, Result = 05200000, Performance =  11.14 TOPS
M N K = 16384 16384  1024, Elapsed time =   0.273889 s, Result = 09400000, Performance =  20.07 TOPS
M N K = 16384 16384  2048, Elapsed time =   0.305746 s, Result = 11800000, Performance =  35.96 TOPS
M N K = 16384 16384  4096, Elapsed time =   0.344139 s, Result = 22000000, Performance =  63.90 TOPS
M N K = 16384 16384  8192, Elapsed time =   0.507649 s, Result = 43000000, Performance =  86.64 TOPS
M N K = 16384 16384 16384, Elapsed time =   0.845943 s, Result = 85000000, Performance = 103.98 TOPS
make unlockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo ondemand | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
cc -Ofast -march=native -fno-strict-aliasing -fopenmp -DCACHELINE=64 -DTM=1024 -DTN=512 -DTK=512 -DSINGLE_CORE=0 -DMULTI_CORE=1 -DCORES_M=4 -DCORES_N=4 -DCORE_START=0 -DCORE_STRIDE=1 -DLOAD_C=0 -DLOAD_AB=1 -DSTORE_C=1 -DAPAD=64 -DBPAD=64 -DCPAD=16 amx-gemm.c -o amx-gemm 
objdump -d amx-gemm > amx-gemm.s
make lockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo userspace | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
	echo 2300000  | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_setspeed > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
./amx-gemm
Test 16 CPU Cores (4 Cores x 4 Cores)(Core 0 - Core 15 per 1 Cores), TM TN TK = 1024 512 512, LOAD_C = 0, LOAD_AB = 1, STORE_C = 1, A/B/C PAD = 64 64 16
Test passed: M N K =   512  1520   192
Test passed: M N K =  1871   295   832
Test passed: M N K =  1621  1959   384
Test passed: M N K =   322  1227   320
Test passed: M N K =  1825   177  1344
M N K =   256   256   256, Elapsed time =   0.000191 s, Result = 00005800, Performance =   1.76 TOPS
M N K =   256   256   512, Elapsed time =   0.000264 s, Result = 0000b000, Performance =   2.54 TOPS
M N K =   256   256  1024, Elapsed time =   0.000316 s, Result = 00016000, Performance =   4.25 TOPS
M N K =   256   256  2048, Elapsed time =   0.000343 s, Result = 0002c000, Performance =   7.83 TOPS
M N K =   256   256  4096, Elapsed time =   0.000850 s, Result = 00058000, Performance =   6.31 TOPS
M N K =   256   256  8192, Elapsed time =   0.002115 s, Result = 000b0000, Performance =   5.08 TOPS
M N K =   256   256 16384, Elapsed time =   0.003659 s, Result = 00160000, Performance =   5.87 TOPS
M N K =   512   512   256, Elapsed time =   0.000454 s, Result = 0000b000, Performance =   2.95 TOPS
M N K =   512   512   512, Elapsed time =   0.000474 s, Result = 00016000, Performance =   5.67 TOPS
M N K =   512   512  1024, Elapsed time =   0.000863 s, Result = 0002c000, Performance =   6.22 TOPS
M N K =   512   512  2048, Elapsed time =   0.001515 s, Result = 00058000, Performance =   7.09 TOPS
M N K =   512   512  4096, Elapsed time =   0.002451 s, Result = 000b0000, Performance =   8.76 TOPS
M N K =   512   512  8192, Elapsed time =   0.004229 s, Result = 00160000, Performance =  10.15 TOPS
M N K =   512   512 16384, Elapsed time =   0.010578 s, Result = 002c0000, Performance =   8.12 TOPS
M N K =  1024  1024   256, Elapsed time =   0.001877 s, Result = 00021000, Performance =   2.86 TOPS
M N K =  1024  1024   512, Elapsed time =   0.001983 s, Result = 00042000, Performance =   5.41 TOPS
M N K =  1024  1024  1024, Elapsed time =   0.002294 s, Result = 00084000, Performance =   9.36 TOPS
M N K =  1024  1024  2048, Elapsed time =   0.003220 s, Result = 00108000, Performance =  13.34 TOPS
M N K =  1024  1024  4096, Elapsed time =   0.004845 s, Result = 00210000, Performance =  17.73 TOPS
M N K =  1024  1024  8192, Elapsed time =   0.007981 s, Result = 00420000, Performance =  21.53 TOPS
M N K =  1024  1024 16384, Elapsed time =   0.015014 s, Result = 00840000, Performance =  22.89 TOPS
M N K =  2048  2048   256, Elapsed time =   0.002067 s, Result = 00084000, Performance =  10.39 TOPS
M N K =  2048  2048   512, Elapsed time =   0.002103 s, Result = 00108000, Performance =  20.43 TOPS
M N K =  2048  2048  1024, Elapsed time =   0.002741 s, Result = 00210000, Performance =  31.34 TOPS
M N K =  2048  2048  2048, Elapsed time =   0.003556 s, Result = 00420000, Performance =  48.31 TOPS
M N K =  2048  2048  4096, Elapsed time =   0.004810 s, Result = 00840000, Performance =  71.43 TOPS
M N K =  2048  2048  8192, Elapsed time =   0.007867 s, Result = 01080000, Performance =  87.35 TOPS
M N K =  2048  2048 16384, Elapsed time =   0.014665 s, Result = 02100000, Performance =  93.72 TOPS
M N K =  4096  4096   256, Elapsed time =   0.003984 s, Result = 00210000, Performance =  21.56 TOPS
M N K =  4096  4096   512, Elapsed time =   0.004224 s, Result = 00420000, Performance =  40.68 TOPS
M N K =  4096  4096  1024, Elapsed time =   0.004955 s, Result = 00840000, Performance =  69.35 TOPS
M N K =  4096  4096  2048, Elapsed time =   0.006375 s, Result = 01080000, Performance = 107.80 TOPS
M N K =  4096  4096  4096, Elapsed time =   0.009188 s, Result = 02100000, Performance = 149.59 TOPS
M N K =  4096  4096  8192, Elapsed time =   0.015535 s, Result = 04200000, Performance = 176.94 TOPS
M N K =  4096  4096 16384, Elapsed time =   0.033074 s, Result = 08400000, Performance = 166.22 TOPS
M N K =  8192  8192   256, Elapsed time =   0.030160 s, Result = 00840000, Performance =  11.39 TOPS
M N K =  8192  8192   512, Elapsed time =   0.031801 s, Result = 01080000, Performance =  21.61 TOPS
M N K =  8192  8192  1024, Elapsed time =   0.034541 s, Result = 02100000, Performance =  39.79 TOPS
M N K =  8192  8192  2048, Elapsed time =   0.039713 s, Result = 04200000, Performance =  69.22 TOPS
M N K =  8192  8192  4096, Elapsed time =   0.051751 s, Result = 08400000, Performance = 106.23 TOPS
M N K =  8192  8192  8192, Elapsed time =   0.084699 s, Result = 10800000, Performance = 129.81 TOPS
M N K =  8192  8192 16384, Elapsed time =   0.197927 s, Result = 21000000, Performance = 111.10 TOPS
M N K = 16384 16384   256, Elapsed time =   0.186191 s, Result = 02100000, Performance =   7.38 TOPS
M N K = 16384 16384   512, Elapsed time =   0.190280 s, Result = 04200000, Performance =  14.45 TOPS
M N K = 16384 16384  1024, Elapsed time =   0.186123 s, Result = 08400000, Performance =  29.54 TOPS
M N K = 16384 16384  2048, Elapsed time =   0.205948 s, Result = 10800000, Performance =  53.39 TOPS
M N K = 16384 16384  4096, Elapsed time =   0.238898 s, Result = 21000000, Performance =  92.05 TOPS
M N K = 16384 16384  8192, Elapsed time =   0.420130 s, Result = 42000000, Performance = 104.68 TOPS
M N K = 16384 16384 16384, Elapsed time =   0.756619 s, Result = 84000000, Performance = 116.26 TOPS
make unlockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo ondemand | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
cc -Ofast -march=native -fno-strict-aliasing -fopenmp -DCACHELINE=64 -DTM=1024 -DTN=512 -DTK=512 -DSINGLE_CORE=0 -DMULTI_CORE=1 -DCORES_M=4 -DCORES_N=4 -DCORE_START=0 -DCORE_STRIDE=1 -DLOAD_C=0 -DLOAD_AB=1 -DSTORE_C=0 -DAPAD=64 -DBPAD=64 -DCPAD=16 amx-gemm.c -o amx-gemm 
objdump -d amx-gemm > amx-gemm.s
make lockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo userspace | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
	echo 2300000  | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_setspeed > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
./amx-gemm
Test 16 CPU Cores (4 Cores x 4 Cores)(Core 0 - Core 15 per 1 Cores), TM TN TK = 1024 512 512, LOAD_C = 0, LOAD_AB = 1, STORE_C = 0, A/B/C PAD = 64 64 16
Test passed: M N K =  1090   490   320
Test passed: M N K =   164  1549  1856
Test passed: M N K =  1157   339   128
Test passed: M N K =   243  1439  1088
Test passed: M N K =   533  1206   576
M N K =   256   256   256, Elapsed time =   0.000147 s, Result = 00005800, Performance =   2.28 TOPS
M N K =   256   256   512, Elapsed time =   0.000170 s, Result = 0000b000, Performance =   3.96 TOPS
M N K =   256   256  1024, Elapsed time =   0.000210 s, Result = 00016000, Performance =   6.39 TOPS
M N K =   256   256  2048, Elapsed time =   0.000374 s, Result = 0002c000, Performance =   7.18 TOPS
M N K =   256   256  4096, Elapsed time =   0.000756 s, Result = 00058000, Performance =   7.10 TOPS
M N K =   256   256  8192, Elapsed time =   0.001809 s, Result = 000b0000, Performance =   5.94 TOPS
M N K =   256   256 16384, Elapsed time =   0.003703 s, Result = 00160000, Performance =   5.80 TOPS
M N K =   512   512   256, Elapsed time =   0.000141 s, Result = 0000b000, Performance =   9.52 TOPS
M N K =   512   512   512, Elapsed time =   0.000233 s, Result = 00016000, Performance =  11.50 TOPS
M N K =   512   512  1024, Elapsed time =   0.000392 s, Result = 0002c000, Performance =  13.71 TOPS
M N K =   512   512  2048, Elapsed time =   0.000698 s, Result = 00058000, Performance =  15.38 TOPS
M N K =   512   512  4096, Elapsed time =   0.001990 s, Result = 000b0000, Performance =  10.79 TOPS
M N K =   512   512  8192, Elapsed time =   0.003718 s, Result = 00160000, Performance =  11.55 TOPS
M N K =   512   512 16384, Elapsed time =   0.008172 s, Result = 002c0000, Performance =  10.51 TOPS
M N K =  1024  1024   256, Elapsed time =   0.000245 s, Result = 00021000, Performance =  21.90 TOPS
M N K =  1024  1024   512, Elapsed time =   0.000380 s, Result = 00042000, Performance =  28.29 TOPS
M N K =  1024  1024  1024, Elapsed time =   0.000571 s, Result = 00084000, Performance =  37.64 TOPS
M N K =  1024  1024  2048, Elapsed time =   0.001626 s, Result = 00108000, Performance =  26.42 TOPS
M N K =  1024  1024  4096, Elapsed time =   0.003055 s, Result = 00210000, Performance =  28.12 TOPS
M N K =  1024  1024  8192, Elapsed time =   0.005964 s, Result = 00420000, Performance =  28.81 TOPS
M N K =  1024  1024 16384, Elapsed time =   0.012321 s, Result = 00840000, Performance =  27.89 TOPS
M N K =  2048  2048   256, Elapsed time =   0.000304 s, Result = 00084000, Performance =  70.71 TOPS
M N K =  2048  2048   512, Elapsed time =   0.000460 s, Result = 00108000, Performance =  93.41 TOPS
M N K =  2048  2048  1024, Elapsed time =   0.000761 s, Result = 00210000, Performance = 112.88 TOPS
M N K =  2048  2048  2048, Elapsed time =   0.001867 s, Result = 00420000, Performance =  92.03 TOPS
M N K =  2048  2048  4096, Elapsed time =   0.003315 s, Result = 00840000, Performance = 103.64 TOPS
M N K =  2048  2048  8192, Elapsed time =   0.006307 s, Result = 01080000, Performance = 108.96 TOPS
M N K =  2048  2048 16384, Elapsed time =   0.013128 s, Result = 02100000, Performance = 104.69 TOPS
M N K =  4096  4096   256, Elapsed time =   0.000444 s, Result = 00210000, Performance = 193.53 TOPS
M N K =  4096  4096   512, Elapsed time =   0.000754 s, Result = 00420000, Performance = 227.81 TOPS
M N K =  4096  4096  1024, Elapsed time =   0.001421 s, Result = 00840000, Performance = 241.84 TOPS
M N K =  4096  4096  2048, Elapsed time =   0.003356 s, Result = 01080000, Performance = 204.74 TOPS
M N K =  4096  4096  4096, Elapsed time =   0.005903 s, Result = 02100000, Performance = 232.82 TOPS
M N K =  4096  4096  8192, Elapsed time =   0.011128 s, Result = 04200000, Performance = 247.02 TOPS
M N K =  4096  4096 16384, Elapsed time =   0.024287 s, Result = 08400000, Performance = 226.36 TOPS
M N K =  8192  8192   256, Elapsed time =   0.001455 s, Result = 00840000, Performance = 236.09 TOPS
M N K =  8192  8192   512, Elapsed time =   0.002765 s, Result = 01080000, Performance = 248.53 TOPS
M N K =  8192  8192  1024, Elapsed time =   0.005734 s, Result = 02100000, Performance = 239.70 TOPS
M N K =  8192  8192  2048, Elapsed time =   0.012658 s, Result = 04200000, Performance = 217.16 TOPS
M N K =  8192  8192  4096, Elapsed time =   0.023614 s, Result = 08400000, Performance = 232.81 TOPS
M N K =  8192  8192  8192, Elapsed time =   0.045690 s, Result = 10800000, Performance = 240.64 TOPS
M N K =  8192  8192 16384, Elapsed time =   0.154672 s, Result = 21000000, Performance = 142.17 TOPS
M N K = 16384 16384   256, Elapsed time =   0.005436 s, Result = 02100000, Performance = 252.83 TOPS
M N K = 16384 16384   512, Elapsed time =   0.010659 s, Result = 04200000, Performance = 257.87 TOPS
M N K = 16384 16384  1024, Elapsed time =   0.021996 s, Result = 08400000, Performance = 249.93 TOPS
M N K = 16384 16384  2048, Elapsed time =   0.048129 s, Result = 10800000, Performance = 228.45 TOPS
M N K = 16384 16384  4096, Elapsed time =   0.091989 s, Result = 21000000, Performance = 239.05 TOPS
M N K = 16384 16384  8192, Elapsed time =   0.242712 s, Result = 42000000, Performance = 181.20 TOPS
M N K = 16384 16384 16384, Elapsed time =   0.578290 s, Result = 84000000, Performance = 152.11 TOPS
make unlockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo ondemand | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
cc -Ofast -march=native -fno-strict-aliasing -fopenmp -DCACHELINE=64 -DTM=1024 -DTN=512 -DTK=512 -DSINGLE_CORE=0 -DMULTI_CORE=1 -DCORES_M=4 -DCORES_N=4 -DCORE_START=0 -DCORE_STRIDE=1 -DLOAD_C=1 -DLOAD_AB=1 -DSTORE_C=1 -DAPAD=0 -DBPAD=0 -DCPAD=0 amx-gemm.c -o amx-gemm 
objdump -d amx-gemm > amx-gemm.s
make lockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo userspace | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
	echo 2300000  | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_setspeed > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
./amx-gemm
Test 16 CPU Cores (4 Cores x 4 Cores)(Core 0 - Core 15 per 1 Cores), TM TN TK = 1024 512 512, LOAD_C = 1, LOAD_AB = 1, STORE_C = 1, A/B/C PAD = 0 0 0
Test passed: M N K =  1081  1683   896
Test passed: M N K =  1867  1353   576
Test passed: M N K =   225  1080    64
Test passed: M N K =  1652   468   448
Test passed: M N K =   804  1340  1280
M N K =   256   256   256, Elapsed time =   0.000256 s, Result = 16106800, Performance =   1.31 TOPS
M N K =   256   256   512, Elapsed time =   0.000317 s, Result = 1b10c000, Performance =   2.11 TOPS
M N K =   256   256  1024, Elapsed time =   0.000368 s, Result = 25117000, Performance =   3.65 TOPS
M N K =   256   256  2048, Elapsed time =   0.000488 s, Result = 3912d000, Performance =   5.50 TOPS
M N K =   256   256  4096, Elapsed time =   0.001093 s, Result = 61159000, Performance =   4.91 TOPS
M N K =   256   256  8192, Elapsed time =   0.002335 s, Result = b11b1000, Performance =   4.60 TOPS
M N K =   256   256 16384, Elapsed time =   0.004840 s, Result = 51261000, Performance =   4.44 TOPS
M N K =   512   512   256, Elapsed time =   0.000622 s, Result = 7840f000, Performance =   2.16 TOPS
M N K =   512   512   512, Elapsed time =   0.000719 s, Result = a041a000, Performance =   3.73 TOPS
M N K =   512   512  1024, Elapsed time =   0.000925 s, Result = f0430000, Performance =   5.81 TOPS
M N K =   512   512  2048, Elapsed time =   0.001782 s, Result = 9045c000, Performance =   6.03 TOPS
M N K =   512   512  4096, Elapsed time =   0.003480 s, Result = d04b4000, Performance =   6.17 TOPS
M N K =   512   512  8192, Elapsed time =   0.005739 s, Result = 50564000, Performance =   7.48 TOPS
M N K =   512   512 16384, Elapsed time =   0.012303 s, Result = 506c4000, Performance =   6.98 TOPS
M N K =  1024  1024   256, Elapsed time =   0.002859 s, Result = 71031000, Performance =   1.88 TOPS
M N K =  1024  1024   512, Elapsed time =   0.003000 s, Result = 61052000, Performance =   3.58 TOPS
M N K =  1024  1024  1024, Elapsed time =   0.003137 s, Result = 41094000, Performance =   6.85 TOPS
M N K =  1024  1024  2048, Elapsed time =   0.004444 s, Result = 01118000, Performance =   9.67 TOPS
M N K =  1024  1024  4096, Elapsed time =   0.006512 s, Result = 81220000, Performance =  13.19 TOPS
M N K =  1024  1024  8192, Elapsed time =   0.010442 s, Result = 81430000, Performance =  16.45 TOPS
M N K =  1024  1024 16384, Elapsed time =   0.018323 s, Result = 81850000, Performance =  18.75 TOPS
M N K =  2048  2048   256, Elapsed time =   0.003338 s, Result = c40c4000, Performance =   6.43 TOPS
M N K =  2048  2048   512, Elapsed time =   0.003190 s, Result = 84148000, Performance =  13.46 TOPS
M N K =  2048  2048  1024, Elapsed time =   0.003572 s, Result = 04250000, Performance =  24.05 TOPS
M N K =  2048  2048  2048, Elapsed time =   0.004750 s, Result = 04460000, Performance =  36.17 TOPS
M N K =  2048  2048  4096, Elapsed time =   0.006468 s, Result = 04880000, Performance =  53.12 TOPS
M N K =  2048  2048  8192, Elapsed time =   0.010595 s, Result = 050c0000, Performance =  64.86 TOPS
M N K =  2048  2048 16384, Elapsed time =   0.018107 s, Result = 06140000, Performance =  75.90 TOPS
M N K =  4096  4096   256, Elapsed time =   0.006222 s, Result = 10310000, Performance =  13.80 TOPS
M N K =  4096  4096   512, Elapsed time =   0.006472 s, Result = 10520000, Performance =  26.54 TOPS
M N K =  4096  4096  1024, Elapsed time =   0.007045 s, Result = 10940000, Performance =  48.77 TOPS
M N K =  4096  4096  2048, Elapsed time =   0.008812 s, Result = 11180000, Performance =  77.98 TOPS
M N K =  4096  4096  4096, Elapsed time =   0.012514 s, Result = 12200000, Performance = 109.83 TOPS
M N K =  4096  4096  8192, Elapsed time =   0.019485 s, Result = 14300000, Performance = 141.07 TOPS
M N K =  4096  4096 16384, Elapsed time =   0.040589 s, Result = 18500000, Performance = 135.45 TOPS
M N K =  8192  8192   256, Elapsed time =   0.045703 s, Result = 40c40000, Performance =   7.52 TOPS
M N K =  8192  8192   512, Elapsed time =   0.046586 s, Result = 41480000, Performance =  14.75 TOPS
M N K =  8192  8192  1024, Elapsed time =   0.048915 s, Result = 42500000, Performance =  28.10 TOPS
M N K =  8192  8192  2048, Elapsed time =   0.057339 s, Result = 44600000, Performance =  47.94 TOPS
M N K =  8192  8192  4096, Elapsed time =   0.080140 s, Result = 48800000, Performance =  68.60 TOPS
M N K =  8192  8192  8192, Elapsed time =   0.116996 s, Result = 50c00000, Performance =  93.98 TOPS
M N K =  8192  8192 16384, Elapsed time =   0.217283 s, Result = 61400000, Performance = 101.21 TOPS
M N K = 16384 16384   256, Elapsed time =   0.271831 s, Result = 03100000, Performance =   5.06 TOPS
M N K = 16384 16384   512, Elapsed time =   0.285427 s, Result = 05200000, Performance =   9.63 TOPS
M N K = 16384 16384  1024, Elapsed time =   0.290282 s, Result = 09400000, Performance =  18.94 TOPS
M N K = 16384 16384  2048, Elapsed time =   0.306915 s, Result = 11800000, Performance =  35.82 TOPS
M N K = 16384 16384  4096, Elapsed time =   0.362178 s, Result = 22000000, Performance =  60.72 TOPS
M N K = 16384 16384  8192, Elapsed time =   0.527061 s, Result = 43000000, Performance =  83.44 TOPS
M N K = 16384 16384 16384, Elapsed time =   0.860478 s, Result = 85000000, Performance = 102.22 TOPS
make unlockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo ondemand | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
cc -Ofast -march=native -fno-strict-aliasing -fopenmp -DCACHELINE=64 -DTM=1024 -DTN=512 -DTK=512 -DSINGLE_CORE=0 -DMULTI_CORE=1 -DCORES_M=4 -DCORES_N=4 -DCORE_START=0 -DCORE_STRIDE=1 -DLOAD_C=1 -DLOAD_AB=1 -DSTORE_C=1 -DAPAD=64 -DBPAD=64 -DCPAD=16 amx-gemm.c -o amx-gemm 
objdump -d amx-gemm > amx-gemm.s
make lockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo userspace | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
	echo 2300000  | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_setspeed > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
./amx-gemm
Test 16 CPU Cores (4 Cores x 4 Cores)(Core 0 - Core 15 per 1 Cores), TM TN TK = 1024 512 512, LOAD_C = 1, LOAD_AB = 1, STORE_C = 1, A/B/C PAD = 64 64 16
Test passed: M N K =    79   215   256
Test passed: M N K =   342   303   896
Test passed: M N K =   497   721  1152
Test passed: M N K =   757  1026  1920
Test passed: M N K =   588  2024   960
M N K =   256   256   256, Elapsed time =   0.000249 s, Result = 16106800, Performance =   1.35 TOPS
M N K =   256   256   512, Elapsed time =   0.000255 s, Result = 1b10c000, Performance =   2.64 TOPS
M N K =   256   256  1024, Elapsed time =   0.000261 s, Result = 25117000, Performance =   5.14 TOPS
M N K =   256   256  2048, Elapsed time =   0.000468 s, Result = 3912d000, Performance =   5.73 TOPS
M N K =   256   256  4096, Elapsed time =   0.000933 s, Result = 61159000, Performance =   5.75 TOPS
M N K =   256   256  8192, Elapsed time =   0.002075 s, Result = b11b1000, Performance =   5.17 TOPS
M N K =   256   256 16384, Elapsed time =   0.003951 s, Result = 51261000, Performance =   5.44 TOPS
M N K =   512   512   256, Elapsed time =   0.000527 s, Result = 7840f000, Performance =   2.55 TOPS
M N K =   512   512   512, Elapsed time =   0.000574 s, Result = a041a000, Performance =   4.68 TOPS
M N K =   512   512  1024, Elapsed time =   0.000865 s, Result = f0430000, Performance =   6.20 TOPS
M N K =   512   512  2048, Elapsed time =   0.001723 s, Result = 9045c000, Performance =   6.23 TOPS
M N K =   512   512  4096, Elapsed time =   0.002584 s, Result = d04b4000, Performance =   8.31 TOPS
M N K =   512   512  8192, Elapsed time =   0.004485 s, Result = 50564000, Performance =   9.58 TOPS
M N K =   512   512 16384, Elapsed time =   0.008455 s, Result = 506c4000, Performance =  10.16 TOPS
M N K =  1024  1024   256, Elapsed time =   0.002672 s, Result = 71031000, Performance =   2.01 TOPS
M N K =  1024  1024   512, Elapsed time =   0.002984 s, Result = 61052000, Performance =   3.60 TOPS
M N K =  1024  1024  1024, Elapsed time =   0.003255 s, Result = 41094000, Performance =   6.60 TOPS
M N K =  1024  1024  2048, Elapsed time =   0.004321 s, Result = 01118000, Performance =   9.94 TOPS
M N K =  1024  1024  4096, Elapsed time =   0.006154 s, Result = 81220000, Performance =  13.96 TOPS
M N K =  1024  1024  8192, Elapsed time =   0.009104 s, Result = 81430000, Performance =  18.87 TOPS
M N K =  1024  1024 16384, Elapsed time =   0.014860 s, Result = 81850000, Performance =  23.12 TOPS
M N K =  2048  2048   256, Elapsed time =   0.003203 s, Result = c40c4000, Performance =   6.70 TOPS
M N K =  2048  2048   512, Elapsed time =   0.003429 s, Result = 84148000, Performance =  12.53 TOPS
M N K =  2048  2048  1024, Elapsed time =   0.003709 s, Result = 04250000, Performance =  23.16 TOPS
M N K =  2048  2048  2048, Elapsed time =   0.004687 s, Result = 04460000, Performance =  36.65 TOPS
M N K =  2048  2048  4096, Elapsed time =   0.006110 s, Result = 04880000, Performance =  56.24 TOPS
M N K =  2048  2048  8192, Elapsed time =   0.008938 s, Result = 050c0000, Performance =  76.89 TOPS
M N K =  2048  2048 16384, Elapsed time =   0.015734 s, Result = 06140000, Performance =  87.35 TOPS
M N K =  4096  4096   256, Elapsed time =   0.006544 s, Result = 10310000, Performance =  13.13 TOPS
M N K =  4096  4096   512, Elapsed time =   0.006873 s, Result = 10520000, Performance =  25.00 TOPS
M N K =  4096  4096  1024, Elapsed time =   0.007554 s, Result = 10940000, Performance =  45.48 TOPS
M N K =  4096  4096  2048, Elapsed time =   0.009091 s, Result = 11180000, Performance =  75.59 TOPS
M N K =  4096  4096  4096, Elapsed time =   0.011743 s, Result = 12200000, Performance = 117.04 TOPS
M N K =  4096  4096  8192, Elapsed time =   0.017575 s, Result = 14300000, Performance = 156.40 TOPS
M N K =  4096  4096 16384, Elapsed time =   0.040397 s, Result = 18500000, Performance = 136.09 TOPS
M N K =  8192  8192   256, Elapsed time =   0.044897 s, Result = 40c40000, Performance =   7.65 TOPS
M N K =  8192  8192   512, Elapsed time =   0.047041 s, Result = 41480000, Performance =  14.61 TOPS
M N K =  8192  8192  1024, Elapsed time =   0.049535 s, Result = 42500000, Performance =  27.75 TOPS
M N K =  8192  8192  2048, Elapsed time =   0.057259 s, Result = 44600000, Performance =  48.01 TOPS
M N K =  8192  8192  4096, Elapsed time =   0.073538 s, Result = 48800000, Performance =  74.76 TOPS
M N K =  8192  8192  8192, Elapsed time =   0.113511 s, Result = 50c00000, Performance =  96.86 TOPS
M N K =  8192  8192 16384, Elapsed time =   0.224164 s, Result = 61400000, Performance =  98.10 TOPS
M N K = 16384 16384   256, Elapsed time =   0.232024 s, Result = 03100000, Performance =   5.92 TOPS
M N K = 16384 16384   512, Elapsed time =   0.245810 s, Result = 05200000, Performance =  11.18 TOPS
M N K = 16384 16384  1024, Elapsed time =   0.271975 s, Result = 09400000, Performance =  20.21 TOPS
M N K = 16384 16384  2048, Elapsed time =   0.302309 s, Result = 11800000, Performance =  36.37 TOPS
M N K = 16384 16384  4096, Elapsed time =   0.342831 s, Result = 22000000, Performance =  64.14 TOPS
M N K = 16384 16384  8192, Elapsed time =   0.506602 s, Result = 43000000, Performance =  86.81 TOPS
M N K = 16384 16384 16384, Elapsed time =   0.849582 s, Result = 85000000, Performance = 103.53 TOPS
make unlockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo ondemand | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
cc -Ofast -march=native -fno-strict-aliasing -fopenmp -DCACHELINE=64 -DTM=1024 -DTN=512 -DTK=512 -DSINGLE_CORE=0 -DMULTI_CORE=1 -DCORES_M=4 -DCORES_N=4 -DCORE_START=0 -DCORE_STRIDE=1 -DLOAD_C=1 -DLOAD_AB=1 -DSTORE_C=1 -DAPAD=1024 -DBPAD=1024 -DCPAD=256 amx-gemm.c -o amx-gemm 
objdump -d amx-gemm > amx-gemm.s
make lockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo userspace | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
	echo 2300000  | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_setspeed > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
./amx-gemm
Test 16 CPU Cores (4 Cores x 4 Cores)(Core 0 - Core 15 per 1 Cores), TM TN TK = 1024 512 512, LOAD_C = 1, LOAD_AB = 1, STORE_C = 1, A/B/C PAD = 1024 1024 256
Test passed: M N K =  1679     2  1344
Test passed: M N K =  1036  1303   832
Test passed: M N K =  1208   845   832
Test passed: M N K =   893   808   192
Test passed: M N K =   312  2026  1088
M N K =   256   256   256, Elapsed time =   0.000229 s, Result = 16106800, Performance =   1.47 TOPS
M N K =   256   256   512, Elapsed time =   0.000261 s, Result = 1b10c000, Performance =   2.57 TOPS
M N K =   256   256  1024, Elapsed time =   0.000298 s, Result = 25117000, Performance =   4.51 TOPS
M N K =   256   256  2048, Elapsed time =   0.000414 s, Result = 3912d000, Performance =   6.48 TOPS
M N K =   256   256  4096, Elapsed time =   0.001023 s, Result = 61159000, Performance =   5.25 TOPS
M N K =   256   256  8192, Elapsed time =   0.002038 s, Result = b11b1000, Performance =   5.27 TOPS
M N K =   256   256 16384, Elapsed time =   0.003938 s, Result = 51261000, Performance =   5.45 TOPS
M N K =   512   512   256, Elapsed time =   0.000571 s, Result = 7840f000, Performance =   2.35 TOPS
M N K =   512   512   512, Elapsed time =   0.000736 s, Result = a041a000, Performance =   3.65 TOPS
M N K =   512   512  1024, Elapsed time =   0.001081 s, Result = f0430000, Performance =   4.97 TOPS
M N K =   512   512  2048, Elapsed time =   0.001657 s, Result = 9045c000, Performance =   6.48 TOPS
M N K =   512   512  4096, Elapsed time =   0.002706 s, Result = d04b4000, Performance =   7.94 TOPS
M N K =   512   512  8192, Elapsed time =   0.004575 s, Result = 50564000, Performance =   9.39 TOPS
M N K =   512   512 16384, Elapsed time =   0.008352 s, Result = 506c4000, Performance =  10.28 TOPS
M N K =  1024  1024   256, Elapsed time =   0.002735 s, Result = 71031000, Performance =   1.96 TOPS
M N K =  1024  1024   512, Elapsed time =   0.003252 s, Result = 61052000, Performance =   3.30 TOPS
M N K =  1024  1024  1024, Elapsed time =   0.003322 s, Result = 41094000, Performance =   6.46 TOPS
M N K =  1024  1024  2048, Elapsed time =   0.004351 s, Result = 01118000, Performance =   9.87 TOPS
M N K =  1024  1024  4096, Elapsed time =   0.005631 s, Result = 81220000, Performance =  15.26 TOPS
M N K =  1024  1024  8192, Elapsed time =   0.009019 s, Result = 81430000, Performance =  19.05 TOPS
M N K =  1024  1024 16384, Elapsed time =   0.014360 s, Result = 81850000, Performance =  23.93 TOPS
M N K =  2048  2048   256, Elapsed time =   0.003098 s, Result = c40c4000, Performance =   6.93 TOPS
M N K =  2048  2048   512, Elapsed time =   0.003448 s, Result = 84148000, Performance =  12.46 TOPS
M N K =  2048  2048  1024, Elapsed time =   0.003702 s, Result = 04250000, Performance =  23.20 TOPS
M N K =  2048  2048  2048, Elapsed time =   0.004797 s, Result = 04460000, Performance =  35.82 TOPS
M N K =  2048  2048  4096, Elapsed time =   0.006038 s, Result = 04880000, Performance =  56.90 TOPS
M N K =  2048  2048  8192, Elapsed time =   0.008862 s, Result = 050c0000, Performance =  77.55 TOPS
M N K =  2048  2048 16384, Elapsed time =   0.014680 s, Result = 06140000, Performance =  93.62 TOPS
M N K =  4096  4096   256, Elapsed time =   0.006450 s, Result = 10310000, Performance =  13.32 TOPS
M N K =  4096  4096   512, Elapsed time =   0.006912 s, Result = 10520000, Performance =  24.86 TOPS
M N K =  4096  4096  1024, Elapsed time =   0.007664 s, Result = 10940000, Performance =  44.83 TOPS
M N K =  4096  4096  2048, Elapsed time =   0.009212 s, Result = 11180000, Performance =  74.59 TOPS
M N K =  4096  4096  4096, Elapsed time =   0.011880 s, Result = 12200000, Performance = 115.69 TOPS
M N K =  4096  4096  8192, Elapsed time =   0.018287 s, Result = 14300000, Performance = 150.31 TOPS
M N K =  4096  4096 16384, Elapsed time =   0.039988 s, Result = 18500000, Performance = 137.48 TOPS
M N K =  8192  8192   256, Elapsed time =   0.046166 s, Result = 40c40000, Performance =   7.44 TOPS
M N K =  8192  8192   512, Elapsed time =   0.048358 s, Result = 41480000, Performance =  14.21 TOPS
M N K =  8192  8192  1024, Elapsed time =   0.051187 s, Result = 42500000, Performance =  26.85 TOPS
M N K =  8192  8192  2048, Elapsed time =   0.072811 s, Result = 44600000, Performance =  37.75 TOPS
M N K =  8192  8192  4096, Elapsed time =   0.073549 s, Result = 48800000, Performance =  74.75 TOPS
M N K =  8192  8192  8192, Elapsed time =   0.113435 s, Result = 50c00000, Performance =  96.93 TOPS
M N K =  8192  8192 16384, Elapsed time =   0.223294 s, Result = 61400000, Performance =  98.48 TOPS
M N K = 16384 16384   256, Elapsed time =   0.233148 s, Result = 03100000, Performance =   5.89 TOPS
M N K = 16384 16384   512, Elapsed time =   0.249875 s, Result = 05200000, Performance =  11.00 TOPS
M N K = 16384 16384  1024, Elapsed time =   0.271744 s, Result = 09400000, Performance =  20.23 TOPS
M N K = 16384 16384  2048, Elapsed time =   0.298777 s, Result = 11800000, Performance =  36.80 TOPS
M N K = 16384 16384  4096, Elapsed time =   0.341418 s, Result = 22000000, Performance =  64.41 TOPS
M N K = 16384 16384  8192, Elapsed time =   0.499108 s, Result = 43000000, Performance =  88.12 TOPS
M N K = 16384 16384 16384, Elapsed time =   0.819813 s, Result = 85000000, Performance = 107.29 TOPS
make unlockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo ondemand | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
cc -Ofast -march=native -fno-strict-aliasing -fopenmp -DCACHELINE=64 -DTM=1024 -DTN=512 -DTK=512 -DSINGLE_CORE=0 -DMULTI_CORE=1 -DCORES_M=4 -DCORES_N=4 -DCORE_START=0 -DCORE_STRIDE=1 -DLOAD_C=1 -DLOAD_AB=1 -DSTORE_C=1 -DAPAD=4096 -DBPAD=4096 -DCPAD=1024 amx-gemm.c -o amx-gemm 
objdump -d amx-gemm > amx-gemm.s
make lockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo userspace | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
	echo 2300000  | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_setspeed > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
./amx-gemm
Test 16 CPU Cores (4 Cores x 4 Cores)(Core 0 - Core 15 per 1 Cores), TM TN TK = 1024 512 512, LOAD_C = 1, LOAD_AB = 1, STORE_C = 1, A/B/C PAD = 4096 4096 1024
Test passed: M N K =  1758   783  2048
Test passed: M N K =  1814  1519  2048
Test passed: M N K =  1935  1569   256
Test passed: M N K =  1744   416   704
Test passed: M N K =   231   922   448
M N K =   256   256   256, Elapsed time =   0.000249 s, Result = 16106800, Performance =   1.35 TOPS
M N K =   256   256   512, Elapsed time =   0.000262 s, Result = 1b10c000, Performance =   2.56 TOPS
M N K =   256   256  1024, Elapsed time =   0.000343 s, Result = 25117000, Performance =   3.92 TOPS
M N K =   256   256  2048, Elapsed time =   0.000562 s, Result = 3912d000, Performance =   4.78 TOPS
M N K =   256   256  4096, Elapsed time =   0.001008 s, Result = 61159000, Performance =   5.33 TOPS
M N K =   256   256  8192, Elapsed time =   0.002238 s, Result = b11b1000, Performance =   4.80 TOPS
M N K =   256   256 16384, Elapsed time =   0.004349 s, Result = 51261000, Performance =   4.94 TOPS
M N K =   512   512   256, Elapsed time =   0.000554 s, Result = 7840f000, Performance =   2.42 TOPS
M N K =   512   512   512, Elapsed time =   0.000653 s, Result = a041a000, Performance =   4.11 TOPS
M N K =   512   512  1024, Elapsed time =   0.000988 s, Result = f0430000, Performance =   5.43 TOPS
M N K =   512   512  2048, Elapsed time =   0.001893 s, Result = 9045c000, Performance =   5.67 TOPS
M N K =   512   512  4096, Elapsed time =   0.003088 s, Result = d04b4000, Performance =   6.95 TOPS
M N K =   512   512  8192, Elapsed time =   0.005546 s, Result = 50564000, Performance =   7.74 TOPS
M N K =   512   512 16384, Elapsed time =   0.010756 s, Result = 506c4000, Performance =   7.99 TOPS
M N K =  1024  1024   256, Elapsed time =   0.002763 s, Result = 71031000, Performance =   1.94 TOPS
M N K =  1024  1024   512, Elapsed time =   0.003194 s, Result = 61052000, Performance =   3.36 TOPS
M N K =  1024  1024  1024, Elapsed time =   0.003401 s, Result = 41094000, Performance =   6.31 TOPS
M N K =  1024  1024  2048, Elapsed time =   0.004336 s, Result = 01118000, Performance =   9.91 TOPS
M N K =  1024  1024  4096, Elapsed time =   0.006513 s, Result = 81220000, Performance =  13.19 TOPS
M N K =  1024  1024  8192, Elapsed time =   0.010328 s, Result = 81430000, Performance =  16.63 TOPS
M N K =  1024  1024 16384, Elapsed time =   0.018035 s, Result = 81850000, Performance =  19.05 TOPS
M N K =  2048  2048   256, Elapsed time =   0.003428 s, Result = c40c4000, Performance =   6.27 TOPS
M N K =  2048  2048   512, Elapsed time =   0.003497 s, Result = 84148000, Performance =  12.28 TOPS
M N K =  2048  2048  1024, Elapsed time =   0.003829 s, Result = 04250000, Performance =  22.43 TOPS
M N K =  2048  2048  2048, Elapsed time =   0.004661 s, Result = 04460000, Performance =  36.86 TOPS
M N K =  2048  2048  4096, Elapsed time =   0.006530 s, Result = 04880000, Performance =  52.62 TOPS
M N K =  2048  2048  8192, Elapsed time =   0.010442 s, Result = 050c0000, Performance =  65.81 TOPS
M N K =  2048  2048 16384, Elapsed time =   0.017979 s, Result = 06140000, Performance =  76.44 TOPS
M N K =  4096  4096   256, Elapsed time =   0.006674 s, Result = 10310000, Performance =  12.87 TOPS
M N K =  4096  4096   512, Elapsed time =   0.006946 s, Result = 10520000, Performance =  24.73 TOPS
M N K =  4096  4096  1024, Elapsed time =   0.007655 s, Result = 10940000, Performance =  44.88 TOPS
M N K =  4096  4096  2048, Elapsed time =   0.009088 s, Result = 11180000, Performance =  75.62 TOPS
M N K =  4096  4096  4096, Elapsed time =   0.012364 s, Result = 12200000, Performance = 111.16 TOPS
M N K =  4096  4096  8192, Elapsed time =   0.019641 s, Result = 14300000, Performance = 139.95 TOPS
M N K =  4096  4096 16384, Elapsed time =   0.039640 s, Result = 18500000, Performance = 138.69 TOPS
M N K =  8192  8192   256, Elapsed time =   0.045824 s, Result = 40c40000, Performance =   7.50 TOPS
M N K =  8192  8192   512, Elapsed time =   0.047935 s, Result = 41480000, Performance =  14.34 TOPS
M N K =  8192  8192  1024, Elapsed time =   0.049821 s, Result = 42500000, Performance =  27.59 TOPS
M N K =  8192  8192  2048, Elapsed time =   0.057226 s, Result = 44600000, Performance =  48.03 TOPS
M N K =  8192  8192  4096, Elapsed time =   0.075926 s, Result = 48800000, Performance =  72.41 TOPS
M N K =  8192  8192  8192, Elapsed time =   0.115092 s, Result = 50c00000, Performance =  95.53 TOPS
M N K =  8192  8192 16384, Elapsed time =   0.215957 s, Result = 61400000, Performance = 101.83 TOPS
M N K = 16384 16384   256, Elapsed time =   0.238561 s, Result = 03100000, Performance =   5.76 TOPS
M N K = 16384 16384   512, Elapsed time =   0.251983 s, Result = 05200000, Performance =  10.91 TOPS
M N K = 16384 16384  1024, Elapsed time =   0.263333 s, Result = 09400000, Performance =  20.88 TOPS
M N K = 16384 16384  2048, Elapsed time =   0.289601 s, Result = 11800000, Performance =  37.97 TOPS
M N K = 16384 16384  4096, Elapsed time =   0.363296 s, Result = 22000000, Performance =  60.53 TOPS
M N K = 16384 16384  8192, Elapsed time =   0.509720 s, Result = 43000000, Performance =  86.28 TOPS
M N K = 16384 16384 16384, Elapsed time =   0.820946 s, Result = 85000000, Performance = 107.15 TOPS
make unlockfreq
make[1]: Entering directory '/home/wangchongxi/cpu-gemm-ldst-bench'
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239; do \
	echo ondemand | sudo tee /sys/devices/system/cpu/cpu$i/cpufreq/scaling_governor > /dev/null; \
done
make[1]: Leaving directory '/home/wangchongxi/cpu-gemm-ldst-bench'
